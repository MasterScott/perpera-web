(this["webpackJsonpperpera-web"]=this["webpackJsonpperpera-web"]||[]).push([[0],Array(18).concat([function(e,t,a){e.exports=a(38)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(14),s=a(2),i=a(3),c=a(4),o=a(5),l=a(1),u=a.n(l),h=a(7),m=a(6),f=(a(24),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.createElement("div",{className:"LoaderComp"},n.createElement("div",{className:"loader-spinner"},n.createElement("div",{className:"spinner"})))}}]),a}(n.Component)),d=function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,null,[{key:"on",value:function(e,t){this.registerTrigger(e,t)}},{key:"fire",value:function(e,t){this.getTriggers(e).forEach((function(e){return e(t)}))}},{key:"getTriggers",value:function(e){return this.triggers[e]||[]}},{key:"registerTrigger",value:function(e,t){this.triggers[e]||(this.triggers[e]=[]),this.triggers[e].push(t)}}]),e}();d.triggers={};a(25);var p=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleFile=n.handleFile.bind(Object(m.a)(n)),n.handleFileUri=n.handleFileUri.bind(Object(m.a)(n)),n.changeFileType=n.changeFileType.bind(Object(m.a)(n)),n.handleURI=n.handleURI.bind(Object(m.a)(n)),n.state={errorMsg:"",fileType:!0,isLoading:!1,uri:""},n}return Object(i.a)(a,[{key:"handleFile",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({isLoading:!0}),a=t.target.files[0],console.log(a),e.next=6,this.getFileBuffer(a);case 6:n=e.sent,console.log(n),d.fire("onNewFileHash",{fileBuffer:n,fileName:a.name}),this.setState({isLoading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFileBuffer",value:function(e){return new Promise((function(t){var a=new FileReader;a.onloadend=function(){a.readyState===a.DONE&&t(a.result)},a.readAsArrayBuffer(e)}))}},{key:"changeFileType",value:function(e){this.setState({fileType:!this.state.fileType,errorMsg:""})}},{key:"getFileSize",value:function(e){var t=new XMLHttpRequest;if(t.open("HEAD",e,!1),t.send(null),200===t.status){var a=t.getResponseHeader("content-length");if(null!=a)return parseInt(a,10)}return-1}},{key:"getUriContent",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,n,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new AbortController,n=a.signal,r=setTimeout(function(){a.abort()}.bind(this),6e5),-1!==this.getFileSize(t)){e.next=5;break}return e.abrupt("return",0);case 5:if(!(this.getFileSize(t)>268435456)){e.next=7;break}return e.abrupt("return",1);case 7:return e.next=9,fetch(t,{method:"get",signal:n});case 9:if(s=e.sent,console.log(s),clearTimeout(r),s.ok){e.next=14;break}return e.abrupt("return",0);case 14:return e.abrupt("return",s.blob().toString());case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleFileUri",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({isLoading:!0}),e.prev=2,e.next=5,this.getUriContent(this.state.uri);case 5:0===(a=e.sent)||1===a?this.setState({errorMsg:"document URI invalid"}):(d.fire("onNewFileHash",{fileBuffer:a,fileName:this.state.uri}),this.setState({fileType:!this.state.fileType})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({errorMsg:"error on adding URI"});case 12:this.setState({isLoading:!1});case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleURI",value:function(e){this.setState({errorMsg:"",uri:e.target.value})}},{key:"render",value:function(){return n.createElement("div",{className:"AddComp"},this.state.isLoading&&n.createElement(f,null),n.createElement("div",{className:"add-btn add-file",title:"input file"},n.createElement("img",{className:"add-icon",src:"/img/attach-file.svg",alt:"attach-file"}),n.createElement("input",{className:"file",type:"file",onChange:this.handleFile})),n.createElement("div",{className:"add-btn add-uri",title:"input uri"},n.createElement("img",{className:"add-icon",src:"/img/attach-uri.svg",alt:"attach uri"}),n.createElement("input",{className:"file",type:"button",onClick:this.changeFileType})),!this.state.fileType&&n.createElement("div",{className:"input-uri"},n.createElement("div",{className:"input-dlg"},n.createElement("button",{className:"close",onClick:this.changeFileType},n.createElement("img",{src:"img/icon-close.svg",alt:"Close Popup"})),n.createElement("form",{className:"form",onSubmit:this.handleFileUri},n.createElement("div",null,n.createElement("label",null,"Insert document URI:")),n.createElement("div",null,n.createElement("input",{className:"form-field",placeholder:"Type URI here...",type:"url",pattern:"https?://.+",onChange:this.handleURI})),this.state.errorMsg&&n.createElement("div",{className:"error-msg"},this.state.errorMsg),n.createElement("button",{className:"form-submit"},"Add Uri")))))}}]),a}(n.Component),g=(a(26),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={apiStatus:!1,isLoading:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://blockbook.peercoin.net/api").then().then((function(t){e.setState({apiStatus:!0})}),(function(t){e.setState({apiStatus:!1})}))}},{key:"render",value:function(){return n.createElement("div",{className:"StatusComp"},this.state.isLoading&&n.createElement(f,null),this.state.apiStatus&&n.createElement("div",{className:"status-btn"},n.createElement("img",{src:"img/status_on.svg",alt:"connected"})),!this.state.apiStatus&&n.createElement("div",{className:"status-btn"},n.createElement("img",{src:"img/status_off.svg",alt:"disconnected"})))}}]),a}(n.Component)),v=(a(27),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.createElement("header",{className:"HeaderComp"},n.createElement("div",{className:"container"},n.createElement("h1",{className:"title"},"PERPERA"),n.createElement("h2",{className:"slogan"},"A Data Audit Protocol."),n.createElement("div",{className:"by"},n.createElement("span",null,"by"),n.createElement("img",{src:"img/peercoin-logo.svg",alt:"Peercoin",width:"95"})),n.createElement("a",{href:"https://github.com/PeerAssets/peerassets-rfcs/blob/master/0009-data-audit.md",className:"slogan",target:"_blank",rel:"noopener noreferrer",style:{marginTop:"20px"}},"How it works")))}}]),a}(n.Component)),b=a(15),w=a(8),y=a(16),E=(a(28),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={isOpen:!0},n.close=n.close.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"close",value:function(){this.setState({isOpen:!1})}},{key:"render",value:function(){return n.createElement("div",{className:this.state.isOpen?"SuccessPopupComp open":"SuccessPopupComp"},n.createElement("div",{className:"success-popup"},n.createElement("img",{src:"img/icon-success.svg",alt:"",className:"success-icon"}),n.createElement("div",{className:"success-title"},this.props.title||"Success!"),n.createElement("div",{className:"success-text"},this.props.text||"File registered to blockchain."),n.createElement("button",{className:"form-submit",onClick:this.close},"OK")))}}]),a}(n.Component)),k=function(){function e(t){Object(s.a)(this,e),this.perpera=void 0,this.network=void 0,this.perpera=window.perpera,this.network=t||window.perpera.networks.peercoin}return Object(i.a)(e,[{key:"getDocument",value:function(e){return new this.perpera.Document(e,this.network)}},{key:"setDocument",value:function(){var e=Object(h.a)(u.a.mark((function e(t,a,n){var r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new this.perpera.Document(t,this.network),s=this.perpera.Spender.fromWIF(n.trim(),this.network),e.next=4,s.sync();case 4:return e.next=6,r.updateContent({hashAlgo:t},s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"updateDocument",value:function(){var e=Object(h.a)(u.a.mark((function e(t,a,n,r){var s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new this.perpera.Document(a,this.network),i=this.perpera.Spender.fromWIF(r.trim(),this.network),e.next=4,i.sync();case 4:return e.next=6,s.updateContent({hashAlgo:a},i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"getFee",value:function(){var e=Object(h.a)(u.a.mark((function e(t,a,n){var r,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new this.perpera.Document(t,this.network),s=this.perpera.Spender.fromWIF(n.trim(),this.network),e.next=4,s.sync();case 4:return e.next=6,r.considerUpdatingContent({hashAlgo:t},s);case 6:return i=e.sent,e.abrupt("return",{fee:i.getFee()/Math.pow(10,6),reference:i});case 8:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getRawTransaction",value:function(){var e=Object(h.a)(u.a.mark((function e(t,a,n){var r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new this.perpera.Document(t,this.network),s=this.perpera.Spender.fromWIF(n.trim(),this.network),e.next=4,s.sync();case 4:return e.next=6,r.getRawTransaction({hashAlgo:t},s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}(),N=(a(29),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).reference=void 0,r.renderEye=function(){return r.state.showPassword?n.createElement("i",{className:"eye-slash",onClick:r.toggleShowPassword}):n.createElement("i",{className:"eye-regular",onClick:r.toggleShowPassword})},r.toggleShowPassword=function(){r.setState({showPassword:!r.state.showPassword})},r.state={errorMsg:"",fileBuffer:new ArrayBuffer(1),fileName:"",hash:"",hashAlgo:"sha2-256",isLoading:!1,isOpen:!1,isSuccess:!1,rawTx:"",showPassword:!1,txid:"",wif:""},r.handleForm=r.handleForm.bind(Object(m.a)(r)),r.handleFee=r.handleFee.bind(Object(m.a)(r)),r.close=r.close.bind(Object(m.a)(r)),r.handleWIF=r.handleWIF.bind(Object(m.a)(r)),r.changeHash=r.changeHash.bind(Object(m.a)(r)),r.handleRaw=r.handleRaw.bind(Object(m.a)(r)),r}return Object(i.a)(a,[{key:"getHash",value:function(e,t){return"sha2-256"===e?Object(b.sha256)(t):"sha2-512"===e?Object(y.sha512)(t):"sha3-256"===e?Object(w.sha3_256)(t):"sha3-512"===e?Object(w.sha3_512)(t):""}},{key:"componentDidMount",value:function(){var e=this;d.on("onNewFileHash",(function(t){console.log(t.fileBuffer),e.setState({fileBuffer:t.fileBuffer,fileName:t.fileName,hash:e.getHash("sha2-256",t.fileBuffer),hashAlgo:"sha2-256",isOpen:!0,originalHash:""})})),d.on("onUpdateFileHash",(function(t){e.setState({fileBuffer:t.fileBuffer,fileName:t.fileName,hash:e.getHash("sha2-256",t.fileBuffer),hashAlgo:"sha2-256",isOpen:!0,originalHash:t.originalHash})}))}},{key:"copyMessage",value:function(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{key:"handleRaw",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({isLoading:!0}),a=new k,e.prev=3,e.next=6,a.getRawTransaction(this.state.hash,this.state.hashAlgo,this.state.wif);case 6:n=e.sent,this.setState({isLoading:!1,rawTx:n}),this.copyMessage(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),this.setState({errorMsg:"WIF invalid.",isLoading:!1});case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleForm",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isLoading:!0}),a=new k,e.prev=3,!this.state.originalHash){e.next=12;break}return e.next=7,a.updateDocument(this.state.originalHash,this.state.hash,this.state.hashAlgo,this.state.wif);case 7:n=e.sent,this.setState({txid:n}),console.log(n),e.next=17;break;case 12:return e.next=14,this.reference.commit();case 14:r=e.sent,this.setState({txid:r}),console.log(r);case 17:this.setState({isSuccess:!0,isLoading:!1}),e.next=27;break;case 20:if(e.prev=20,e.t0=e.catch(3),!e.t0.toString().includes("Insufficient funds")){e.next=25;break}return this.setState({errorMsg:"Your wallet has no funds.",isLoading:!1}),e.abrupt("return");case 25:console.log(e.t0),this.setState({errorMsg:"WIF invalid.",isLoading:!1});case 27:case"end":return e.stop()}}),e,this,[[3,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleFee",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({isLoading:!0}),a=new k,e.prev=3,e.next=6,a.getFee(this.state.hash,this.state.hashAlgo,this.state.wif);case 6:n=e.sent,this.reference=n.reference,this.setState({fee:n.fee,isLoading:!1}),e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(3),!e.t0.toString().includes("Insufficient funds")){e.next=16;break}return this.setState({errorMsg:"Your wallet has no funds.",isLoading:!1}),e.abrupt("return");case 16:console.log(e.t0),this.setState({errorMsg:"WIF invalid.",isLoading:!1});case 18:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleWIF",value:function(e){this.setState({errorMsg:"",wif:e.target.value,rawTx:""})}},{key:"close",value:function(){this.setState({isOpen:!1,isLoading:!1})}},{key:"nextHashAlgo",value:function(e){return"sha2-256"===e?"sha2-512":"sha2-512"===e?"sha3-256":"sha3-256"===e?"sha3-512":"sha3-512"===e?"sha2-256":""}},{key:"changeHash",value:function(){var e=this.nextHashAlgo(this.state.hashAlgo);this.setState({fee:void 0,hash:this.getHash(e,this.state.fileBuffer),hashAlgo:e})}},{key:"render",value:function(){var e=this.state,t=e.wif,a=e.showPassword;return n.createElement("div",{className:this.state.isOpen?"RegisterPopupComp open":"RegisterPopupComp"},this.state.isLoading&&n.createElement(f,null),this.state.isSuccess&&n.createElement(E,{txid:this.state.txid,text:"Your file got registered in the blockchain. Wait at least 10 minutes and use the file hash to check it's registry."}),this.state.isOpen&&n.createElement("div",{className:"register-popup"},n.createElement("button",{className:"close",onClick:this.close},n.createElement("img",{src:"img/icon-close.svg",alt:"Close Popup"})),n.createElement("div",{className:"file"},n.createElement("img",{src:"img/icon-file.svg",alt:"File",className:"file-icon"}),n.createElement("span",null,this.state.fileName)),n.createElement("div",{className:"hash"},n.createElement("div",{className:"label",onClick:this.changeHash,title:"change to "+this.nextHashAlgo(this.state.hashAlgo)},this.state.hashAlgo),n.createElement("div",{className:"hash-string"},this.state.hash)),!this.state.fee&&n.createElement("p",null,"Fee to be calculated."),this.state.fee&&n.createElement("p",null,"Saving this hash on blockchain will cost you a transaction fee of ",n.createElement("b",{className:"bold-green"},this.state.fee," PPC"),"."),!this.state.fee&&n.createElement("form",{className:"form",onSubmit:this.handleFee},n.createElement("label",null,"Insert your WIF:",this.renderEye()),n.createElement("input",{className:"form-field",autoCorrect:"false",placeholder:"Type WIF here...",value:t.trim(),onChange:this.handleWIF,type:a?"text":"password"}),this.state.errorMsg&&n.createElement("div",{className:"error-msg"},this.state.errorMsg),n.createElement("button",{className:"form-submit",disabled:this.state.isLoading||this.state.isSuccess},"Calculate Fee")),this.state.fee&&n.createElement("form",{className:"form",onSubmit:this.handleForm},n.createElement("label",null,"Insert your WIF:",this.renderEye()),n.createElement("input",{className:"form-field",autoCorrect:"false",placeholder:"Type WIF here...",value:t.trim(),onChange:this.handleWIF,type:a?"text":"password"}),this.state.errorMsg&&n.createElement("div",{className:"error-msg"},this.state.errorMsg),""===this.state.rawTx&&n.createElement("button",{className:"btn-getraw",disabled:this.state.isLoading,onClick:this.handleRaw},"Show Raw Transaction"),""!==this.state.rawTx&&n.createElement("div",{className:"show-raw"},n.createElement("label",null,"Raw Transaction"),n.createElement("div",null,this.state.rawTx)),n.createElement("button",{className:"form-submit",disabled:this.state.isLoading||this.state.isSuccess},this.state.originalHash?"Update":"Register"," Document")),n.createElement("p",null,"After registering, you will have to wait for at least one new block to be sure your entry is registered with the blockchain.")))}}]),a}(n.Component)),O=(a(30),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).makeHex=function(e){return Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("")},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.revision.state.hash);return n.createElement("div",{className:this.props.isCurrent?"RevisionComp is-current":"RevisionComp"},this.props.isCurrent&&n.createElement("span",{className:"current-label"},"Current Revision"),t.map((function(t){return n.createElement("div",{className:"revision-info",key:Math.random()},n.createElement("div",{className:"revision-title"},"Document Hash (",t,"):"),n.createElement("div",{className:"revision-value"},e.makeHex(e.props.revision.state.hash[t])))})),n.createElement("div",{className:"revision-info",key:Math.random()},n.createElement("div",{className:"revision-title"},"Date Issued:"),n.createElement("div",{className:"revision-value"},this.props.revision.formattedTime)),n.createElement("div",{className:"revision-info",key:Math.random()},n.createElement("div",{className:"revision-title"},"Owner:"),n.createElement("div",{className:"revision-value"},this.props.revision.state.owner)))}}]),a}(n.Component)),S=(a(31),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleFile=n.handleFile.bind(Object(m.a)(n)),n.state={isLoading:!1},n}return Object(i.a)(a,[{key:"handleFile",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({isLoading:!0}),a=t.target.files[0],console.log(a),e.next=6,this.getFileBuffer(a);case 6:n=e.sent,d.fire("onUpdateFileHash",{originalHash:this.props.originalHash,fileBuffer:n,fileName:a.name}),this.setState({isLoading:!1});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFileBuffer",value:function(e){return new Promise((function(t){var a=new FileReader;a.onloadend=function(){a.readyState===a.DONE&&t(a.result)},a.readAsArrayBuffer(e)}))}},{key:"render",value:function(){return n.createElement("div",{className:"UpdateComp"},this.state.isLoading&&n.createElement(f,null),n.createElement("div",{className:"update-btn"},"+",n.createElement("input",{className:"file",type:"file",onChange:this.handleFile})))}}]),a}(n.Component)),j=(a(32),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.doc.transitions[this.props.doc.transitions.length-1].formattedTime;return n.createElement("div",{className:"ResultDetailsComp"},n.createElement("div",{className:"data"},n.createElement("div",{className:"label"},"Showing Revisions for Tag:"),n.createElement("div",{className:"value green"},this.props.doc.tag)),n.createElement("div",{className:"panel grey"},n.createElement("div",{className:"data"},n.createElement("div",{className:"label"},"Network:"),n.createElement("div",{className:"value green"},this.props.doc.driver.network.coin)),n.createElement("div",{className:"data"},n.createElement("div",{className:"label"},"Last Update:"),n.createElement("div",{className:"value green"},e))),n.createElement("h3",null,"File Revisions (",this.props.doc.transitions.length,"):"),this.props.doc.transitions.map((function(e,t){return n.createElement(O,{isCurrent:0===t,key:Math.random(),revision:e})})),n.createElement("hr",null),n.createElement(S,{originalHash:this.props.doc.tag}))}}]),a}(n.Component)),x=(a(33),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={isSearchArrived:!1,result:void 0},n}return Object(i.a)(a,[{key:"componentWillMount",value:function(){var e=this;d.on("onSearch",(function(t){"empty"!==t.status?e.setState({isSearchArrived:!0,result:t}):e.setState({isSearchArrived:!1,result:void 0})}))}},{key:"render",value:function(){var e;return e=this.state.isSearchArrived?this.state.result.doc?n.createElement(j,{doc:this.state.result.doc}):n.createElement("h2",{key:"b",className:"waiting-message"},n.createElement("span",null,"No results found for this document tag.")):n.createElement("h2",{key:"a",className:"waiting-message"},n.createElement("span",null,"Waiting for a search above.")),n.createElement("div",{className:"ResultComp"},n.createElement("div",{className:"container"},e))}}]),a}(n.Component)),F=a(17),C=a(12),T=(a(34),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).searchTag=n.searchTag.bind(Object(m.a)(n)),n.setSearchText=n.setSearchText.bind(Object(m.a)(n)),n.state={isLoading:!1,networkType:"peercoin",searchText:""},n}return Object(i.a)(a,[{key:"searchTag",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,n,r,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.searchText,r=a.networkType,t.preventDefault(),n.trim()){e.next=5;break}return d.fire("onSearch",{status:"empty"}),e.abrupt("return");case 5:return this.setState({isLoading:!0}),s=window.perpera,i=new s.Document(n,s.networks[r]),e.next=10,i.sync();case 10:i=this.formatDate(i),Array.from(i.blocks).length<1&&(i=void 0),d.fire("onSearch",{status:"search",doc:i}),this.setState({isLoading:!1});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"formatDate",value:function(e){return e.transitions=e.transitions.map((function(e){return Object(F.a)({},e,{formattedTime:C.DateTime.fromISO(e.state.time.toISOString()).toLocaleString(C.DateTime.DATETIME_MED)})})),e}},{key:"setSearchText",value:function(e){var t=e.target;this.setState({searchText:t.value})}},{key:"render",value:function(){return n.createElement("form",{className:"SearchComp",onSubmit:this.searchTag},this.state.isLoading&&n.createElement(f,null),n.createElement("input",{type:"text",className:"search-field",placeholder:"Search document tag",onInput:this.setSearchText}),n.createElement("button",{className:"search-btn"},n.createElement("img",{src:"img/icon-search.svg",alt:"Search",width:"24"})))}}]),a}(n.Component)),A=(a(35),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentWillMount",value:function(){d.on("onSearch",(function(e){console.log("Fired!"),console.log(e)}))}},{key:"render",value:function(){return n.createElement("div",{className:"AppComp"},n.createElement(v,null),n.createElement(T,null),n.createElement(p,null),n.createElement(g,null),n.createElement(x,null),n.createElement(N,null))}}]),a}(n.Component)),L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(36),a(37);r.render(n.createElement(A,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");L?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):I(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):I(e)}))}}()}]),[[18,1,2]]]);
//# sourceMappingURL=main.1cfe5b46.chunk.js.map